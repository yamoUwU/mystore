(()=>{"use strict";var e={6262:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,r]of t)n[e]=r;return n}}},t={};const n=Vue;function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return i(s,"_invoke",function(n,r,i){var o,a,c,l=0,s=i||[],f=!1,d={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return o=t,a=0,c=e,d.n=n,u}};function v(n,r){for(a=n,c=r,t=0;!f&&l&&!i&&t<s.length;t++){var i,o=s[t],v=d.p,m=o[2];n>3?(i=m===r)&&(c=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=v&&((i=n<2&&v<o[1])?(a=0,d.v=r,d.n=o[1]):v<m&&(i=n<3||o[0]>r||r>m)&&(o[4]=n,o[5]=r,d.n=m,a=0))}if(i||n>1)return u;throw f=!0,r}return function(i,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,m),a=s,c=m;(t=a<2?e:c)||!f;){o||(a?a<3?(a>1&&(d.n=-1),v(a,c)):d.n=c:d.v=c);try{if(l=2,o){if(a||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==u)break}catch(t){o=e,a=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,a),!0),s}var u={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var d=[][o]?t(t([][o]())):(i(t={},o,(function(){return this})),t),v=f.prototype=l.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=f,i(v,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(v),i(v,a,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),(r=function(){return{w:c,m}})()}function i(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){i(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}},i(e,t,n,r)}function o(e,t,n,r,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function c(e){o(a,r,i,c,u,"next",e)}function u(e){o(a,r,i,c,u,"throw",e)}c(void 0)}))}}const c={props:{id:{type:String,default:function(){return null},required:!0},verifyUrl:{type:String,default:function(){return null},required:!0},activateLicenseUrl:{type:String,default:function(){return null},required:!0},deactivateLicenseUrl:{type:String,default:function(){return null},required:!0},resetLicenseUrl:{type:String,default:function(){return null},required:!0}},data:function(){return{initialized:null,loading:!0,verified:!1,license:null}},mounted:function(){this.verifyLicense()},methods:{verifyLicense:function(){var e=this;return a(r().m((function t(){var n,i,o;return r().w((function(t){for(;;)switch(t.n){case 0:if(n=function(){var e=localStorage.getItem("license_verification_time"),t="true"===localStorage.getItem("license_is_verified");if(!e)return!0;var n=Date.now(),r=parseInt(e);if(t){return n-r>2592e5}return n-r>864e5},i=localStorage.getItem("license_data"),o="true"===localStorage.getItem("license_is_verified"),!i||n()){t.n=3;break}return t.p=1,e.verified=o,e.license=JSON.parse(i),e.initialized=!0,e.loading=!1,t.a(2,Promise.resolve());case 2:t.p=2,t.v;case 3:return t.a(2,$httpClient.makeWithoutErrorHandler().get(e.verifyUrl).then((function(t){var n=t.data;e.verified=!0,e.license=n.data,localStorage.setItem("license_verification_time",Date.now().toString()),localStorage.setItem("license_is_verified","true"),localStorage.setItem("license_data",JSON.stringify(n.data))})).catch((function(e){e.response&&400===e.response.status&&Botble.showError(e.response.data.message),localStorage.setItem("license_verification_time",Date.now().toString()),localStorage.setItem("license_is_verified","false"),localStorage.removeItem("license_data")})).finally((function(){e.initialized=!0,e.loading=!1})))}}),t,null,[[1,2]])})))()},onSubmit:function(){var e=this;return a(r().m((function t(){var n;return r().w((function(t){for(;;)if(0===t.n)return n=new FormData(e.$refs.formRef),t.a(2,e.doActivateLicense(n))}),t)})))()},resetLicense:function(){var e=this;return a(r().m((function t(){var n;return r().w((function(t){for(;;)if(0===t.n)return n=new FormData(e.$refs.formRef),t.a(2,e.doResetLicense(n))}),t)})))()},deactivateLicense:function(){var e=this;return a(r().m((function t(){return r().w((function(t){for(;;)if(0===t.n)return e.loading=!0,t.a(2,$httpClient.make().post(e.deactivateLicenseUrl).then((function(){e.verified=!1,localStorage.setItem("license_verification_time",Date.now().toString()),localStorage.setItem("license_is_verified","false"),localStorage.removeItem("license_data")})).finally((function(){e.loading=!1})))}),t)})))()},doActivateLicense:function(e){var t=this;return a(r().m((function n(){return r().w((function(n){for(;;)if(0===n.n)return t.loading=!0,n.a(2,$httpClient.make().postForm(t.activateLicenseUrl,e).then((function(e){var n=e.data;t.verified=!0,t.license=n.data,Botble.showSuccess(n.message),localStorage.setItem("license_verification_time",Date.now().toString()),localStorage.setItem("license_is_verified","true"),localStorage.setItem("license_data",JSON.stringify(n.data))})).finally((function(){t.loading=!1})))}),n)})))()},doResetLicense:function(e){var t=this;return a(r().m((function n(){return r().w((function(n){for(;;)if(0===n.n)return t.loading=!0,n.a(2,$httpClient.make().postForm(t.resetLicenseUrl,e).then((function(e){var n=e.data;t.verified=!1,Botble.showSuccess(n.message),localStorage.setItem("license_verification_time",Date.now().toString()),localStorage.setItem("license_is_verified","false"),localStorage.removeItem("license_data")})).finally((function(){t.loading=!1})))}),n)})))()}}};var u=function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(6262);const l=(0,u.A)(c,[["render",function(e,t,r,i,o,a){return(0,n.openBlock)(),(0,n.createElementBlock)("form",{id:"license-form",ref:"formRef",onSubmit:t[0]||(t[0]=(0,n.withModifiers)((function(){return a.onSubmit&&a.onSubmit.apply(a,arguments)}),["prevent"]))},[(0,n.renderSlot)(e.$slots,"default",(0,n.normalizeProps)((0,n.guardReactiveProps)({initialized:o.initialized,loading:o.loading,verified:o.verified,license:o.license,deactivateLicense:a.deactivateLicense,resetLicense:a.resetLicense})))],544)}]]);"undefined"!=typeof vueApp&&vueApp.booting((function(e){e.component("v-license-form",l)}))})();